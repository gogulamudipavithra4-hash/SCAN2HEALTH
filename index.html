<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scan2Health ‚Äì Final</title>

<style>
body{
  font-family:Arial, sans-serif;
  background:#eef2f7;
  padding:20px;
}
.container{
  max-width:800px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:12px;
  box-shadow:0 0 18px rgba(0,0,0,.15);
}
h2{text-align:center;margin-bottom:10px}

label{font-weight:bold;margin-top:12px;display:block}

input,select,button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}

button{
  background:#2563eb;
  color:white;
  border:none;
  cursor:pointer;
}
button:hover{background:#1e40af}

#scannerBox{
  margin-top:12px;
  border:3px dashed #2563eb;
  border-radius:10px;
  padding:8px;
}

video{
  width:100%;
  border-radius:8px;
}

.symptoms{
  display:grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 10px;
}

@media (min-width: 600px){
  .symptoms{ grid-template-columns: 1fr 1fr; }
}
@media (min-width: 900px){
  .symptoms{ grid-template-columns: 1fr 1fr 1fr; }
}

.symptom-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px;
  border:1px solid #e5e7eb;
  border-radius:8px;
  background:#f9fafb;
}

.symptom-btn{
  flex:1;
  padding:12px;
  border-radius:6px;
  border:none;
  font-size:15px;
  cursor:pointer;
  color:white;
  background:#2563eb;
  transition: background 0.3s;
}
.symptom-btn:hover{ background:#1e40af }

.result{
  margin-top:20px;
  padding:15px;
  border-radius:8px;
  font-size:16px;
}
.good{background:#dcfce7;color:#166534}
.bad{background:#fee2e2;color:#991b1b}
</style>
</head>

<body>

<div class="container">
<h2 id="title">üõí Scan2Health</h2>

<button onclick="initVoice()">üîì Enable Voice</button>

<label id="langLabel">Language</label>
<select id="lang" onchange="switchLang()">
  <option value="en">English</option>
  <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
  <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
</select>

<label id="ageLabel">Age</label>
<input type="number" id="age">

<label id="diseaseLabel">Disease</label>
<select id="disease" onchange="loadSymptoms()"></select>

<label id="symptomLabel">Symptoms</label>
<div class="symptoms" id="symptomBox"></div>

<label id="scanLabel">Scan Product</label>
<div id="scannerBox">
  <video id="video"></video>
</div>

<button onclick="startScan()">üì∑ Start Scan</button>

<label id="codeLabel">Product Code</label>
<input id="code">

<button onclick="checkProduct()" id="checkBtn">Check Product</button>
<button onclick="repeatVoice()" id="repeatBtn">üîÅ Repeat Voice</button>

<div id="output"></div>
</div>

<script src="https://unpkg.com/@zxing/library@latest"></script>

<script>
/* ---------- LANGUAGE DATA ---------- */
const uiText={
 en:{title:"Scan2Health", age:"Age", disease:"Disease", symptoms:"Symptoms", scan:"Scan Product", code:"Product Code", check:"Check Product", repeat:"Repeat Voice"},
 te:{title:"‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç2‡∞π‡±Ü‡∞≤‡±ç‡∞§‡±ç", age:"‡∞µ‡∞Ø‡∞∏‡±Å", disease:"‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø", symptoms:"‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞æ‡∞≤‡±Å", scan:"‡∞â‡∞§‡±ç‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡±ç", code:"‡∞â‡∞§‡±ç‡∞™‡∞§‡±ç‡∞§‡∞ø ‡∞ï‡±ã‡∞°‡±ç", check:"‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", repeat:"‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞µ‡∞ø‡∞®‡∞Ç‡∞°‡∞ø"},
 hi:{title:"‡§∏‡•ç‡§ï‡•à‡§®2‡§π‡•á‡§≤‡•ç‡§•", age:"‡§Ü‡§Ø‡•Å", disease:"‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä", symptoms:"‡§≤‡§ï‡•ç‡§∑‡§£", scan:"‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§∏‡•ç‡§ï‡•à‡§®", code:"‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ï‡•ã‡§°", check:"‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç", repeat:"‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∏‡•Å‡§®‡•á‡§Ç"}
};

/* ---------- DISEASE + SYMPTOMS ---------- */
const diseaseData={
 en:{
  diabetes:{name:"Diabetes", symptoms:["Blurred Vision","Excessive Thirst","Fatigue","Frequent Urination","Slow Healing","Weight Loss"]},
  bp:{name:"Blood Pressure", symptoms:["Chest Pain","Dizziness","Fatigue","Headache","Nosebleed"]},
  kidney:{name:"Kidney Issues", symptoms:["Back Pain","Fatigue","Foamy Urine","Loss of Appetite","Swelling"]},
  asthma:{name:"Asthma", symptoms:["Chest Tightness","Coughing","Shortness of Breath","Wheezing"]},
  heart:{name:"Heart Disease", symptoms:["Chest Pain","Fatigue","Irregular Heartbeat","Shortness of Breath","Swelling Legs"]},
  liver:{name:"Liver Issues", symptoms:["Abdominal Pain","Dark Urine","Jaundice","Nausea","Swelling"]},
  thyroid:{name:"Thyroid", symptoms:["Dry Skin","Fatigue","Hair Loss","Mood Swings","Weight Change"]},
  obesity:{name:"Obesity", symptoms:["Fatigue","Joint Pain","Shortness of Breath","Snoring","Weight Gain"]},
  arthritis:{name:"Arthritis", symptoms:["Fatigue","Joint Pain","Limited Range of Motion","Stiffness","Swelling"]}
 },
 te:{
  diabetes:{name:"‡∞Æ‡∞ß‡±Å‡∞Æ‡±á‡∞π‡∞Ç", symptoms:["‡∞§‡±Ä‡∞µ‡±ç‡∞∞‡∞Æ‡±à‡∞® ‡∞¶‡∞æ‡∞π‡∞Ç","‡∞§‡∞∞‡∞ö‡±Ç ‡∞Æ‡±Ç‡∞§‡±ç‡∞∞‡∞Ç","‡∞Æ‡∞∏‡∞ï ‡∞ö‡±Ç‡∞™‡±Å","‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞ó‡∞Æ‡∞®‡±Ä‡∞Ø‡∞Ç‡∞ó‡∞æ ‡∞Æ‡±Ü‡∞≤‡∞ï‡±Å‡∞µ ‡∞≤‡±á‡∞¶‡±Å","‡∞¨‡∞∞‡±Å‡∞µ‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞°‡∞Ç"]},
  bp:{name:"‡∞∞‡∞ï‡±ç‡∞§‡∞™‡±ã‡∞ü‡±Å", symptoms:["‡∞§‡∞≤‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞§‡∞≤ ‡∞§‡∞ø‡∞∞‡∞ó‡∞°‡∞Ç","‡∞õ‡∞æ‡∞§‡∞ø ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞Æ‡±Å‡∞ï‡±ç‡∞ï‡±Å ‡∞∞‡∞ï‡±ç‡∞§‡∞∏‡±ç‡∞∞‡∞æ‡∞µ‡∞Ç","‡∞Ö‡∞≤‡∞∏‡∞ü"]},
  kidney:{name:"‡∞µ‡±É‡∞ï‡±ç‡∞ï ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞≤‡±Å", symptoms:["‡∞µ‡∞æ‡∞™‡±Å","‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞®‡±Å‡∞∞‡±Å‡∞ó‡±Å ‡∞Æ‡±Ç‡∞§‡±ç‡∞∞‡∞Ç","‡∞Ü‡∞π‡∞æ‡∞∞‡∞Ç ‡∞ï‡±ã‡∞≤‡±ç‡∞™‡±ã‡∞µ‡∞°‡∞Ç","‡∞µ‡±Ü‡∞®‡±Å‡∞ï ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø"]},
  asthma:{name:"‡∞Ö‡∞∏‡±ç‡∞§‡∞Æ‡∞æ", symptoms:["‡∞∂‡±ç‡∞µ‡∞æ‡∞∏ ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç‡∞≤‡±ã ‡∞á‡∞¨‡±ç‡∞¨‡∞Ç‡∞¶‡∞ø","‡∞ó‡±ä‡∞Ç‡∞§‡±Å‡∞≤‡±ã ‡∞∏‡±ä‡∞∞‡∞≤‡±Å","‡∞â‡∞¨‡±ç‡∞¨‡∞∏‡∞Ç","‡∞õ‡∞æ‡∞§‡∞ø ‡∞∞‡∞ï‡±ç‡∞§‡∞Ç"]},
  heart:{name:"‡∞π‡±É‡∞¶‡∞Ø ‡∞∞‡±ã‡∞ó‡∞Ç", symptoms:["‡∞õ‡∞æ‡∞§‡∞ø ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞∂‡±ç‡∞µ‡∞æ‡∞∏ ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç‡∞≤‡±ã ‡∞á‡∞¨‡±ç‡∞¨‡∞Ç‡∞¶‡∞ø","‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞ï‡∞æ‡∞≤‡∞ø ‡∞µ‡∞æ‡∞™‡±Å","‡∞ó‡±Å‡∞Ç‡∞°‡±Ü ‡∞Ö‡∞∏‡∞Æ‡∞æ‡∞® ‡∞Æ‡±Å‡∞°‡∞§‡∞≤‡±Å"]},
  liver:{name:"‡∞ï‡∞æ‡∞≤‡±á‡∞Ø ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞≤‡±Å", symptoms:["‡∞ú‡∞æ‡∞Ç‡∞°‡∞ø‡∞∏‡±ç","‡∞â‡∞™‡∞∞‡∞ø‡∞§‡∞≤ ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞µ‡∞æ‡∞™‡±Å","‡∞Æ‡∞≤‡∞¨‡∞¶‡±ç‡∞ß‡∞ï‡∞Ç","‡∞ó‡∞æ‡∞¢ ‡∞Æ‡∞≤‡∞Æ‡±Å"]},
  thyroid:{name:"‡∞•‡±à‡∞∞‡∞æ‡∞Ø‡∞ø‡∞°‡±ç", symptoms:["‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞¨‡∞∞‡±Å‡∞µ‡±Å ‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡±Å","‡∞ö‡±Å‡∞Ç‡∞°‡±ç‡∞∞‡∞Ç ‡∞ú‡±Å‡∞ü‡±ç‡∞ü‡±Å","‡∞é‡∞Ç‡∞°‡∞ø‡∞™‡±ã‡∞Ø‡∞ø‡∞® ‡∞ö‡∞∞‡±ç‡∞Æ‡∞Ç","‡∞Æ‡±Ç‡∞°‡±ç ‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡±Å‡∞≤‡±Å"]},
  obesity:{name:"‡∞∏‡±ç‡∞•‡±Ç‡∞≤‡∞§‡±ç‡∞µ‡∞Ç", symptoms:["‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞ú‡±ã‡∞°‡±Å ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞∂‡±ç‡∞µ‡∞æ‡∞∏ ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç‡∞≤‡±ã ‡∞á‡∞¨‡±ç‡∞¨‡∞Ç‡∞¶‡∞ø","‡∞Æ‡±Å‡∞ï‡±ç‡∞ï‡±Å ‡∞∂‡∞¨‡±ç‡∞¶‡∞Ç","‡∞¨‡∞∞‡±Å‡∞µ‡±Å ‡∞™‡±Ü‡∞∞‡∞ó‡∞°‡∞Ç"]},
  arthritis:{name:"‡∞Ü‡∞∞‡±ç‡∞•‡∞∞‡±à‡∞ü‡∞ø‡∞∏‡±ç", symptoms:["‡∞Ö‡∞≤‡∞∏‡∞ü","‡∞ú‡±ã‡∞°‡±Å ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø","‡∞ö‡∞≤‡∞®‡∞Ç ‡∞™‡∞∞‡∞ø‡∞Æ‡∞ø‡∞§‡∞Ç","‡∞ó‡∞ü‡±ç‡∞ü‡∞ø‡∞ó‡∞æ ‡∞â‡∞Ç‡∞°‡∞ü‡∞Ç","‡∞µ‡∞æ‡∞™‡±Å"]}
 },
 hi:{
  diabetes:{name:"‡§Æ‡§ß‡•Å‡§Æ‡•á‡§π", symptoms:["‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§™‡•ç‡§Ø‡§æ‡§∏","‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§™‡•á‡§∂‡§æ‡§¨","‡§ß‡•Å‡§Ç‡§ß‡§≤‡•Ä ‡§¶‡•É‡§∑‡•ç‡§ü‡§ø","‡§ß‡•Ä‡§∞‡•á ‡§ò‡§æ‡§µ ‡§≠‡§∞‡§®‡§æ","‡§•‡§ï‡§æ‡§®","‡§µ‡§ú‡§® ‡§ò‡§ü‡§®‡§æ"]},
  bp:{name:"‡§¨‡•ç‡§≤‡§° ‡§™‡•ç‡§∞‡•á‡§∂‡§∞", symptoms:["‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶","‡§ö‡§ï‡•ç‡§ï‡§∞","‡§∏‡•Ä‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶","‡§®‡§æ‡§ï ‡§∏‡•á ‡§ñ‡•Ç‡§® ‡§Ü‡§®‡§æ","‡§•‡§ï‡§æ‡§®"]},
  kidney:{name:"‡§ï‡§ø‡§°‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ", symptoms:["‡§™‡•Ä‡§† ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶","‡§•‡§ï‡§æ‡§®","‡§ù‡§æ‡§ó‡§¶‡§æ‡§∞ ‡§™‡•á‡§∂‡§æ‡§¨","‡§≠‡•Ç‡§ñ ‡§ï‡§Æ ‡§π‡•ã‡§®‡§æ","‡§∏‡•Ç‡§ú‡§®"]},
  asthma:{name:"‡§¶‡§Æ‡§æ", symptoms:["‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à","‡§ñ‡§æ‡§Å‡§∏‡•Ä","‡§∏‡§æ‡§Å‡§∏ ‡§ï‡•Ä ‡§ñ‡§ø‡§Ç‡§ö‡§æ‡§à","‡§õ‡§æ‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§∏‡§æ‡§µ"]},
  heart:{name:"‡§π‡•É‡§¶‡§Ø ‡§∞‡•ã‡§ó", symptoms:["‡§õ‡§æ‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶","‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à","‡§•‡§ï‡§æ‡§®","‡§™‡•à‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•Ç‡§ú‡§®","‡§Ö‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§ß‡§°‡§º‡§ï‡§®"]},
  liver:{name:"‡§Ø‡§ï‡•É‡§§ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ", symptoms:["‡§™‡•Ä‡§≤‡§ø‡§Ø‡§æ","‡§™‡•á‡§ü ‡§¶‡§∞‡•ç‡§¶","‡§∏‡•Ç‡§ú‡§®","‡§Æ‡§§‡§≤‡•Ä","‡§ó‡§æ‡§¢‡§º‡§æ ‡§™‡•á‡§∂‡§æ‡§¨"]},
  thyroid:{name:"‡§•‡§æ‡§Ø‡§∞‡•â‡§á‡§°", symptoms:["‡§•‡§ï‡§æ‡§®","‡§µ‡§ú‡§® ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§æ‡§µ","‡§¨‡§æ‡§≤ ‡§ù‡§°‡§º‡§®‡§æ","‡§∂‡•Å‡§∑‡•ç‡§ï ‡§§‡•ç‡§µ‡§ö‡§æ","‡§Æ‡•Ç‡§° ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§æ‡§µ"]},
  obesity:{name:"‡§Æ‡•ã‡§ü‡§æ‡§™‡§æ", symptoms:["‡§•‡§ï‡§æ‡§®","‡§ú‡•ã‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶","‡§∏‡§æ‡§Å‡§∏ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§à","‡§ñ‡§∞‡•ç‡§∞‡§æ‡§ü‡•á","‡§µ‡§ú‡§® ‡§¨‡§¢‡§º‡§®‡§æ"]},
  arthritis:{name:"‡§ó‡§†‡§ø‡§Ø‡§æ", symptoms:["‡§•‡§ï‡§æ‡§®","‡§ú‡•ã‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶","‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§ó‡§§‡§ø","‡§ú‡§ï‡§°‡§º‡§®","‡§∏‡•Ç‡§ú‡§®"]}
 }
};

/* ---------- PRODUCT DATABASE ---------- */
const products={
 "101":{name:{en:"Sugar",te:"‡∞ö‡∞ï‡±ç‡∞ï‡±Ü‡∞∞",hi:"‡§ö‡•Ä‡§®‡•Ä"},food:true,avoid:["diabetes"],alt:{en:"Stevia",te:"‡∞∏‡±ç‡∞ü‡±Ä‡∞µ‡∞ø‡∞Ø‡∞æ",hi:"‡§∏‡•ç‡§ü‡•Ä‡§µ‡§ø‡§Ø‡§æ"}},
 "102":{name:{en:"Salt",te:"‡∞â‡∞™‡±ç‡∞™‡±Å",hi:"‡§®‡§Æ‡§ï"},food:true,avoid:["bp","kidney"],alt:{en:"Low Sodium Salt",te:"‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞∏‡±ã‡∞°‡∞ø‡∞Ø‡∞Ç ‡∞â‡∞™‡±ç‡∞™‡±Å",hi:"‡§≤‡•ã ‡§∏‡•ã‡§°‡§ø‡§Ø‡§Æ ‡§®‡§Æ‡§ï"}},
 "999":{food:false}
};

let voices=[],lastSpeech="";

/* ---------- VOICE ---------- */
function initVoice(){
 voices=speechSynthesis.getVoices();
 alert("Voice enabled");
}
speechSynthesis.onvoiceschanged=()=>voices=speechSynthesis.getVoices();

function speak(text){
 lastSpeech=text;
 let u=new SpeechSynthesisUtterance(text);
 let l=lang.value;
 u.lang=l==="te"?"te-IN":l==="hi"?"hi-IN":"en-IN";
 let v=voices.find(x=>x.lang===u.lang) || voices[0];
 if(v)u.voice=v;
 speechSynthesis.cancel();
 speechSynthesis.speak(u);
}
function repeatVoice(){ if(lastSpeech) speak(lastSpeech); }

/* ---------- UI ---------- */
function switchLang(){
 let l=lang.value;
 let prevDisease = disease.value; // store current disease

 title.innerText=uiText[l].title;
 ageLabel.innerText=uiText[l].age;
 diseaseLabel.innerText=uiText[l].disease;
 symptomLabel.innerText=uiText[l].symptoms;
 scanLabel.innerText=uiText[l].scan;
 codeLabel.innerText=uiText[l].code;
 checkBtn.innerText=uiText[l].check;
 repeatBtn.innerText=uiText[l].repeat;

 loadDiseases();

 // Restore previous disease if available
 if(prevDisease && diseaseData[l][prevDisease]){
   disease.value = prevDisease;
   loadSymptoms();
 }
}

/* ---------- LOAD DISEASES ---------- */
function loadDiseases(){
 disease.innerHTML='<option value="">-- Select --</option>';
 let l=lang.value;
 for(let d in diseaseData[l]){
  disease.innerHTML+=`<option value="${d}">${diseaseData[l][d].name}</option>`;
 }
 symptomBox.innerHTML="";
}

/* ---------- LOAD SYMPTOMS ---------- */
function loadSymptoms(){
 symptomBox.innerHTML = "";
 let l = lang.value;
 let d = disease.value;
 if(!d) return;

 let symptoms = [...diseaseData[l][d].symptoms].sort();

 symptoms.forEach(s => {
   let div = document.createElement('div');
   div.className = "symptom-item";
   div.innerHTML = `<input type="checkbox" value="${s}"><label>${s}</label>`;
   symptomBox.appendChild(div);
 });

 // Button container
 let btnContainer = document.createElement('div');
 btnContainer.style.display = "flex";
 btnContainer.style.gap = "10px";
 btnContainer.style.marginTop = "10px";

 let selectAllBtn = document.createElement('button');
 selectAllBtn.className = "symptom-btn";
 selectAllBtn.textContent = l==="te"?"‡∞Ö‡∞®‡±ç‡∞®‡±Ä ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø":l==="hi"?"‡§∏‡§≠‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç":"Select All";
 selectAllBtn.onclick = () => {
   symptomBox.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = true);
 };
 btnContainer.appendChild(selectAllBtn);

 let deselectAllBtn = document.createElement('button');
 deselectAllBtn.className = "symptom-btn";
 deselectAllBtn.textContent = l==="te"?"‡∞Ö‡∞®‡±ç‡∞®‡±Ä ‡∞∞‡∞¶‡±ç‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø":l==="hi"?"‡§∏‡§≠‡•Ä ‡§π‡§ü‡§æ‡§è‡§Å":"Deselect All";
 deselectAllBtn.onclick = () => {
   symptomBox.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
 };
 btnContainer.appendChild(deselectAllBtn);

 symptomBox.appendChild(btnContainer);
}

/* ---------- SCAN ---------- */
let reader;
function startScan(){
 reader=new ZXing.BrowserMultiFormatReader();
 reader.decodeFromVideoDevice(null,"video",(res)=>{
  if(res){
   code.value=res.text;
   reader.reset();
  }
 });
}

/* ---------- CHECK PRODUCT ---------- */
function checkProduct(){
 let c=code.value;
 let l=lang.value;
 let out=output;

 if(!products[c] || !products[c].food){
  alert(l==="te"?"‡∞á‡∞¶‡∞ø ‡∞Ü‡∞π‡∞æ‡∞∞‡∞Ç ‡∞ï‡∞æ‡∞¶‡±Å":l==="hi"?"‡§Ø‡§π ‡§≠‡•ã‡§ú‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à":"Not a food item");
  speak(l==="te"?"‡∞á‡∞¶‡∞ø ‡∞Ü‡∞π‡∞æ‡∞∞‡∞Ç ‡∞ï‡∞æ‡∞¶‡±Å":l==="hi"?"‡§Ø‡§π ‡§≠‡•ã‡§ú‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à":"This is not a food item");
  return;
 }

 let p=products[c];
 if(p.avoid.includes(disease.value)){
  let msg=`${p.name[l]} not recommended. Use ${p.alt[l]}`;
  out.innerHTML=`<div class="result bad">‚ùå ${msg}</div>`;
  speak(msg);
 }else{
  let msg=`${p.name[l]} is safe to consume`;
  out.innerHTML=`<div class="result good">‚úÖ ${msg}</div>`;
  speak(msg);
 }
}

/* INIT */
switchLang();
</script>

</body>
</html>
